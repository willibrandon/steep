# Contracts: Configuration Viewer

**Feature**: 008-configuration-viewer

## Overview

This feature is an internal TUI component that does not expose external APIs. All interaction occurs through the Bubbletea message-passing architecture.

## Internal Contracts

### Message Types

The Configuration Viewer uses Bubbletea messages for communication with the main application:

```go
// ConfigDataMsg contains refreshed configuration data.
type ConfigDataMsg struct {
    Data  *models.ConfigData
    Error error
}

// RefreshConfigMsg triggers a data refresh.
type RefreshConfigMsg struct{}

// ExportConfigResultMsg contains the result of an export operation.
type ExportConfigResultMsg struct {
    Filename string
    Count    int  // Number of parameters exported
    Success  bool
    Error    error
}
```

### View Interface

The ConfigView implements the standard ViewModel interface:

```go
type ViewModel interface {
    Init() tea.Cmd
    Update(tea.Msg) (ViewModel, tea.Cmd)
    View() string
    SetSize(width, height int)
}
```

### Monitor Integration

The Configuration monitor sends ConfigDataMsg to the main app on each refresh cycle (60 seconds).

## No External APIs

- No REST endpoints
- No gRPC services
- No WebSocket connections
- Read-only access to PostgreSQL via pg_settings view

## File Export Contract

The `:export config <filename>` command produces a text file in PostgreSQL config format:

```
# PostgreSQL Configuration Export
# Generated by Steep on YYYY-MM-DD HH:MM:SS
# Server: <connection_string>
# Parameters: <count> (<modified_count> modified from defaults)

parameter_name = 'value'  # short description
...
```

File is written to the specified path with UTF-8 encoding and Unix line endings.
